<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sticky TOC Test</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Test page specific styles */
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            line-height: 1.6;
        }
        
        .test-content {
            padding: 2rem;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .test-section {
            margin-bottom: 3rem;
            padding: 2rem;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        h1, h2, h3 {
            color: #1a365d;
        }
        
        /* Simulate header */
        #unified-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: rgba(25, 57, 89, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- Simulated header -->
    <header id="unified-header">
        Test Header with Blur
    </header>

    <!-- Test TOC -->
    <nav class="toc toc-sticky">
        <h2>Table of Contents</h2>
        <ul>
            <li><a href="#section1">Section 1: Introduction</a>
                <ul>
                    <li><a href="#section1-1">1.1 Overview</a></li>
                    <li><a href="#section1-2">1.2 Purpose</a></li>
                </ul>
            </li>
            <li><a href="#section2">Section 2: Main Content</a>
                <ul>
                    <li><a href="#section2-1">2.1 Features</a></li>
                    <li><a href="#section2-2">2.2 Benefits</a>
                        <ul>
                            <li><a href="#section2-2-1">2.2.1 Performance</a></li>
                            <li><a href="#section2-2-2">2.2.2 Usability</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><a href="#section3">Section 3: Conclusion</a></li>
        </ul>
    </nav>

    <!-- Test content -->
    <main class="test-content">
        <div class="test-section" id="section1">
            <h1>Section 1: Introduction</h1>
            <p>This is a test page to verify the sticky TOC behavior. The TOC should:</p>
            <ul>
                <li>Be collapsed by default when sticky</li>
                <li>Not interfere with page navigation when collapsed</li>
                <li>Use borderless blur without white tinting</li>
                <li>Expand on hover with proper blur effects</li>
                <li>Have sub-items with blur instead of white backgrounds on hover</li>
            </ul>
            
            <div id="section1-1">
                <h2>1.1 Overview</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
            </div>
            
            <div id="section1-2">
                <h2>1.2 Purpose</h2>
                <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>
        </div>

        <div class="test-section" id="section2">
            <h1>Section 2: Main Content</h1>
            <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
            
            <div id="section2-1">
                <h2>2.1 Features</h2>
                <p>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>
            
            <div id="section2-2">
                <h2>2.2 Benefits</h2>
                <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
                
                <div id="section2-2-1">
                    <h3>2.2.1 Performance</h3>
                    <p>Totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt.</p>
                </div>
                
                <div id="section2-2-2">
                    <h3>2.2.2 Usability</h3>
                    <p>Explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit.</p>
                </div>
            </div>
        </div>

        <div class="test-section" id="section3">
            <h1>Section 3: Conclusion</h1>
            <p>Sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est.</p>
            <p>Qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt.</p>
        </div>

        <!-- Add more content to test scrolling -->
        <div class="test-section">
            <h2>Additional Content</h2>
            <p>This section provides additional content to test the sticky behavior when scrolling.</p>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
            <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
            <p>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </div>
    </main>

    <script src="table-of-contents.js"></script>
    <script>
        // Initialize TOC when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Add sticky class to simulate sticky behavior
            const toc = document.querySelector('.toc');
            if (toc) {
                toc.classList.add('toc-sticky');
                document.body.classList.add('toc-sticky-active');
            }
            
            // Initialize TOC if the function exists
            if (typeof window.TableOfContents !== 'undefined') {
                window.TableOfContents.init();
            }
        });
    </script>
</body>
</html>
